<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Art Creator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        #canvasContainer {
            position: relative;
            display: flex;
            align-items: center;
        }
        #pixelCanvas {
            border: 1px solid #ccc;
            cursor: crosshair;
            image-rendering: pixelated;
        }
        #palette {
            display: flex;
            flex-wrap: wrap;
            margin: 10px 0;
        }
        .colorBox {
            width: 30px;
            height: 30px;
            border: 1px solid #999;
            margin: 1px;
            cursor: pointer;
        }
        #controls {
            margin-top: 10px;
        }
        button {
            padding: 10px;
            margin: 5px;
            border: none;
            background-color: #007BFF;
            color: white;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        #zoomControls {
            margin: 10px 0;
        }
        input[type="file"] {
            margin: 5px;
        }
        #gridSize {
            margin: 5px;
        }
    </style>
</head>
<body>

<h1>Pixel Art Creator</h1>

<div id="canvasContainer">
    <canvas id="pixelCanvas" width="480" height="480"></canvas>
</div>
<div id="controls">
    <div id="palette"></div>
    <button id="clearCanvas">Limpar</button>
    <input type="file" id="loadPalette" accept="image/*">
    <input type="range" id="gridSize" min="1" max="100" value="16"> Tamanho da Grade
    <div id="zoomControls">
        <button id="zoomIn">Zoom In</button>
        <button id="zoomOut">Zoom Out</button>
    </div>
</div>

<script>
    const canvas = document.getElementById("pixelCanvas");
    const ctx = canvas.getContext("2d");
    const paletteDiv = document.getElementById("palette");
    const gridSizeInput = document.getElementById("gridSize");
    const zoomInButton = document.getElementById("zoomIn");
    const zoomOutButton = document.getElementById("zoomOut");

    let currentColor = "#000000";
    let gridSize = 16;
    let zoomLevel = 1;

    function drawGrid() {
        const size = canvas.width / gridSize;
        for (let i = 0; i < gridSize; i++) {
            for (let j = 0; j < gridSize; j++) {
                ctx.strokeStyle = "#dddddd";
                ctx.strokeRect(i * size, j * size, size, size);
            }
        }
    }

    function fillPixel(x, y) {
        const size = canvas.width / gridSize;
        ctx.fillStyle = currentColor;
        ctx.fillRect(Math.floor(x / size) * size, Math.floor(y / size) * size, size, size);
    }

    canvas.addEventListener("click", (e) => {
        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        fillPixel(x, y);
    });

    function createPalette() {
        for (let i = 0; i < 8; i++) {
            const color = "#" + Math.floor(Math.random() * 16777215).toString(16);
            const colorBox = document.createElement("div");
            colorBox.className = "colorBox";
            colorBox.style.backgroundColor = color;
            colorBox.onclick = () => {
                currentColor = color;
            };
            paletteDiv.appendChild(colorBox);
        }
    }

    document.getElementById("clearCanvas").onclick = () => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawGrid();
    };

    gridSizeInput.oninput = (e) => {
        gridSize = e.target.value;
        drawGrid();
    };

    zoomInButton.onclick = () => {
        zoomLevel += 0.1;
        canvas.style.transform = `scale(${zoomLevel})`;
        canvas.style.transformOrigin = "top left";
    };

    zoomOutButton.onclick = () => {
        if (zoomLevel > 0.1) {
            zoomLevel -= 0.1;
            canvas.style.transform = `scale(${zoomLevel})`;
            canvas.style.transformOrigin = "top left";
        }
    };

    document.getElementById("loadPalette").onchange = (e) => {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = function(event) {
            const img = new Image();
            img.onload = function() {
                ctx.drawImage(img, 0, 0, gridSize, gridSize);
                createPalette();
            };
            img.src = event.target.result;
        };
        reader.readAsDataURL(file);
    };

    createPalette();
    drawGrid();
</script>

</body>
</html>
